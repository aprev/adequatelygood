<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="{{ blog.html_type }}; charset={{ blog.charset }}" />
		<title>{{ title }}</title>
		<meta name="generator" content="Bloog {{ bloog_version }}" />
		
		<!-- Blueprint CSS Framework -->
		<link rel="stylesheet" href="/static/css/blueprint/screen.css" type="text/css" media="screen, projection">
		<link rel="stylesheet" href="/static/css/blueprint/print.css" type="text/css" media="print">
		<!--[if lt IE 8]>
		  <link rel="stylesheet" href="/static/css/blueprint/ie.css" type="text/css" media="screen, projection">
		<![endif]-->
		
		<!-- Blueprint Fancy-Type Plugin-->
		<link rel="stylesheet" href="/static/css/blueprint/plugins/fancy-type/screen.css">
		
		<!-- jQuery UI "Smoothness" Theme -->
		<link rel="stylesheet" type="text/css" href="/static/css/jquery-ui-smoothness/jquery-ui-1.7.2.custom.css" />
		
		<!-- Site CSS -->
		<link rel="stylesheet" href="/static/css/ag.css" type="text/css" media="screen" />
		
		<!-- Extra <head> Links -->
		<link rel="alternate" type="application/rss+xml" title="{{ blog.title }} RSS Feed" href="{{ blog.root_url }}{{ blog.master_atom_url }}" />
		<!-- TODO: favicon -->
		
		{% block head %}
		{% endblock %}
	</head>
	<body>
		<a name="top"></a>
		<div id="container" class="container">
			
			<!-- Header -->
			<div id="header" class="span-24 last">
				<!-- Title -->
				<div id="title" class="span-24 last">
					<div class="span-17 colborder prepend-top append-bottom">
						<h1>
							<a href="/">{{ blog.title|lower }}</a>
						</h1>
						<h3 class="prepend-2 alt">{{ blog.description }}</h3>
					</div>
					<div class="span-6 last prepend-top append-bottom">
						<h2>
							written by
							<!-- TODO: fix bcherry.net and change this link back -->
							<a href="http://bcherry.appspot.com">ben cherry</a>
						</h2>
					</div>
				</div>
				
				<hr />
				
				<!-- Navigation Bar -->
				<div class="prepend-2 span-20 append-2 last append-bottom nav">
					<div class="span-4">
						<a href="/" title="Return to the the frontpage">Home</a>
						<br />
						<span style="display:none;">Frontpage</span>
					</div>
					<div class="span-4">
						<a href="#" id="archiveLink" title="View the archives">Archives</a>
						<br />
						<span style="display:none;">Browse freely</span>
					</div>
					{% for link in navlinks %}
					<div class="span-4">
						<a href="{{ link.url }}" title="{{ link.description }}">{{ link.title }}</a>
						<br/>
						<span style="display:none;">{{ link.description }}</span>
					</div>
					{% endfor %}
					<div class="span-4 last">
						<a href="{{ blog.master_atom_url }}" title="Subscribe to the main Atom feed">Atom</a>
						<br/>
						<span style="display:none;">Syndication</span>
					</div>
				</div>
				
				<hr />
				
				<!-- Archives Links -->
				<div id="archives" class="span-24" style="display:none;">
					{% for year in archive_years %}
						<div class="span-2"><a href="/{{ year }}">{{ year }}</a></div>
					{% endfor %}
					<div class="span-22 last"></div>
				</div>
			</div>

			<!-- First Column: Posts, etc. -->
			<div id="content" class="span-17 colborder">
				<a name="main"></a>
				{% block first_column %}
				{% for article in articles %}
					{% include 'article_excerpt.html' %}
				{% endfor %}
				{% if not articles %}
					{% include 'bloog_intro.html' %}
				{% endif %}
				{% include 'pager.html' %}
				{% endblock %}
			</div>

			<!-- Second column: Search, links, etc. -->
			{% block second_column %}
			<div id="sidebar" class="span-6 last">
				{% block search %}
				<div id="search" class="span-6 last">
					<form method="get" id="searchForm" class="span-6 last" action="/search">
						<input type="text" class="span-4" value="{{ searchterm }}" name="s" id="s" />
						<input id="searchsubmit" type="image" src="/static/default/images/btn_search.gif" alt="Search" />
					</form>
				</div>
				{% endblock %}

				{% block tags %}
				<div id="tags">
					<h3>Categories</h3>
					{% if blog_tags %}
						<ul>
						{% for tag in blog_tags %}
							{% ifnotequal tag.count 0 %}
							<li>
								<a href="/tag/{{ tag.name|urlencode }}">{{ tag.name }}</a>
								({{ tag.count }})
							</li>
							{% endifnotequal %}
						{% endfor %}
						</ul>
					{% else %}
						No posts have been tagged yet.
					{% endif %}
				</div>
				{% endblock %}

				{% block extra_panel %}
				{% endblock %}

				{% if user_is_admin %}
					<!-- Administrative Console -->
					<div id="admin">
						<h3>Administrative Panel</h3>
						<ul>
							<li><a id="newblog" href="#">New Blog Entry</a></li>
							<li><a id="newarticle" href="#">New Article</a>
								- unsyndicated<br />(e.g., about page)</li>
							<li><a id="openshell" href="/admin/shell">Open Shell</a></li>
							<li><a href="/admin/cache_stats">Memcached Stats</a></li>
							<li><a href="/admin/timings">Timing Stats</a></li>
						</ul>
					</div>
				{% endif %}

				{% block featuredPages1 %}
				<div id="links">
					<h3>{{ featuredMyPages.title }}</h3>
					<p>
						{{ featuredMyPages.description }}
					</p>
					<ul>
						{% for entry in featuredMyPages.entries %}
						<li>
							<a href="{{ entry.url }}">{{ entry.title }}</a>
							- {{ entry.description }}
						</li>
						{% endfor %}
					</ul>
				</div>
				{% endblock %}

				{% block subscribe %}
				<div id="subscribe">
					<h3>Subscribe</h3>
					<p>
						Keep up with my latest adequately good tips!
					</p>
					<ul>
						<li>
							<a href="{{ blog.master_atom_url }}" title="Full content Atom feed">Atom feed</a>
						</li>
					</ul>
				</div>
				{% endblock %}
				{% block books %}
				<div id="books">
					<h3>What I'm Reading</h3>
					<div id="ShelfariWidget114860">
						<div class="preloader">
							<img src="/static/images/ajax-loader.gif" />
							<br />
							Loading...
						</div>
						<noscript>
							<p>Find new 
								<a href="http://www.shelfari.com/books">books</a> 
								and literate friends with Shelfari, the online 
								<a href="http://www.shelfari.com/">book club</a>
								.
							</p>
						</noscript>
					</div>
				</div>
			 	{% endblock %}
			</div>
			{% endblock %}

			<hr />
			
			<div class="prepend-2 span-20 append-2 last append-bottom nav">
				<div class="span-4">
					<a href="/" title="Return to the the frontpage">Home
						<br/>
						<span style="display:none;">Frontpage</span>
					</a>
				</div>
				{% if user %}
				<div class="span-4">
					<a href="{{ logout_url }}" title="Logout">Logout
						<br/>
						<span style="display:none;">goodbye</span>
					</a>
				</div>
				{% else %}
				<div class="span-4">
					<a href="{{ login_url }}" title="Login">Login
						<br/>
						<span style="display:none;">Google id</span>
					</a>
				</div>
				{% endif %}
				{% for link in navlinks %}
				<div class="span-4">
					<a href="{{ link.url }}" title="{{ link.description }}">{{ link.title }}
						<br/>
						<span style="display:none;">{{ link.description }}</span>
					</a>
				</div>
				{% endfor %}
				<div class="span-4 last">
					<a href="{{ blog.master_atom_url }}" title="Subscribe to the main Atom feed">Atom
						<br/>
						<span style="display:none;">Syndication</span>
					</a>
				</div>
			</div>
			
			<hr />
			
			<div class="span-24 last">
				<div id="attribution" class="span-12">
					<div>Adequately Good is modified from <a href="http://bloog.billkatz.com">Bloog</a>, available at
						<a href="http://github.com/DocSavage/bloog">GitHub</a> under an MIT license.</div>
					<div>The reasonably decent design was created with <a href="http://blueprintcss.org/">Blueprint CSS</a>.</div>
					<div>Cache debugging: Page was rendered {% now "M j, H:i:s" %}.
						{% if user %}
							({{ user.nickname }})
						{% endif %}
						{% if user_is_admin %}
							User is administrator.
						{% endif %}
					</div>
				</div>
				<div class="prepend-8 span-4 last">
					<img id="poweredby" src="/static/images/appengine-noborder-120x30.gif" alt="Powered by Google App Engine" />
				</div>
			</div>
		</div>

		<!-- jQuery and Chili need to be included outside of LABjs because it breaks their dom-ready detection -->
		<script type="text/javascript" src="/static/js/jquery-1.3.2.min.js"></script>
		<script type="text/javascript" src="/static/js/chili/jquery.chili-2.2.js"></script>
		<script type="text/javascript" src="/static/js/consul.js"></script>
		<script type="text/javascript">
			ChiliBook.recipeFolder = "/static/js/chili/";
			consul.turnOn({{blog.js_debug}});
			jQuery.noConflict();
		</script>

		
		<!-- Include LABjs and request the rest of the script files-->
		<!--<script type="text/javascript" src="/static/js/LAB.min.js"></script>
		<script type="text/javascript">
			$LAB
			.script("/static/js/jquery-ui-1.7.2.custom.min.js")
			.script("/static/js/jquery.templates.js")
			.script("/static/js/ckeditor/ckeditor.js")
			.block()
			.script("/static/js/base.js")
			.script("http://www.shelfari.com/ws/114860/widget.js")
			.script("/static/js/comments.js")
			{% if user_is_admin %}.script("/static/js/admin.js"){% endif %}
		</script>-->
		
		<script type="text/javascript" src="/static/js/jquery-ui-1.7.2.custom.min.js"></script>
		<script type="text/javascript" src="/static/js/jquery.templates.js"></script>
		<script type="text/javascript" src="/static/js/ckeditor/ckeditor.js"></script>
		<script type="text/javascript" src="/static/js/base.js"></script>
		<script type="text/javascript" src="http://www.shelfari.com/ws/114860/widget.js"></script>
		<script type="text/javascript" src="/static/js/comments.js"></script>
		{% if user_is_admin %}<script type="text/javascript" src="/static/js/admin.js"></script>{% endif %}

		{% if user_is_admin %}
		{% include "form_editor.html" %}
		{% endif %}

		{% block end_body %}
		{% endblock %}
	</body>
</html>
